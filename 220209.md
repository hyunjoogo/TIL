# 220209

# useHistory Pushí•  ë•Œ state ê°™ì´ ë³´ë‚´ê¸°

<aside>
ğŸ’¡ `"react-router-dom": 5ë²„ì „ ì´í•˜ë§Œ ê°€ëŠ¥` 6ë²„ì „ìœ¼ë¡œ ì—…ê·¸ë ˆì´ë“œ ë˜ì—ˆê³  useHistoryê°€ ì‚¬ë¼ì¡Œë‹¤.

</aside>

ë¨¼ì € ê¸°ì¡´ ë°©ì‹ì—ì„œ stateë¥¼ ë³´ë‚´ëŠ” ê²ƒì„ ì•Œì•„ë³´ì.

```jsx
import {useHistory} from "react-router-dom";

history.push("URL") // stateì—†ì´ ë³´ë‚´ëŠ” ë°©ë²•

history.push({
	pathname : "URL",
	state : {ë³€ìˆ˜ : ê°’}
}) // stateë¥¼ ê°™ì´ ë³´ë‚¼ ìˆ˜ ìˆë‹¤.
```

ì˜ˆì „ì— ì‚¬ìš©í–ˆë˜ ë°©ë²•ì´ë¼ì„œ í¸í•˜ê²Œ í–ˆëŠ”ë° ë¬¸ì œê°€ ìƒê²¼ë‹¤. 
URLì— ì¿¼ë¦¬ë¥¼ ì¶”ê°€í–ˆë”ë‹ˆ ê³„ì† homeìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ê°€ ë˜ì—ˆë‹¤.

search ê²°ê³¼ ì¿¼ë¦¬ë¥¼ ë”°ë¡œ ë¶„ë¦¬í•´ì„œ ì ì–´ì¤˜ì•¼í•œë‹¤.

```jsx
history.push({
pathname: `/company-management/device-info/register`,
  search: `?id=${companyCodeData.id}&companyCode=${companyCode}`,
  state:{bizNum: companyCodeData.bizNum}
}) // ì¿¼ë¦¬ëŠ” ë”°ë¡œ searchì— ì ì–´ì•¼ í•œë‹¤.
```

# Firebase: Firebase App named '[DEFAULT]' already exists (app/duplicate-app)

### ìƒí™©

- ë¡œê·¸ì•„ì›ƒ í›„ ë‹¤ì‹œ ë¡œê·¸ì¸í•˜ë©´ ì—ëŸ¬ê°€ ë‚¨
- ë‹¤ì‹œ ë¡œê·¸ì¸í•˜ì—¬ë„ ì—ëŸ¬ê°€ ë‚¨
- ê·¸ ìƒíƒœì—ì„œ ìƒˆë¡œê³ ì¹¨ì„ í•˜ë©´ ë¡œê·¸ì¸ì´ ë˜ì–´ ìˆìŒ

### ì—ëŸ¬í™•ì¸

- error ì½˜ì†”ì„ ì°ì–´ë³´ë‹ˆê¹Œ ì œëª©ê³¼ ê°™ì€ ì—ëŸ¬ê°€ ë‚¨

### ìƒíƒœí™•ì¸

- ë¡œê·¸ì¸ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì„œë²„ì—ì„œ í† í°ì„ ê°€ì§€ê³  ì˜¤ê³  firebaseë¥¼ ì´ˆê¸°í™”í•œë‹¤.
- ì´ˆê¸°í™”ë¥¼ í•œë²ˆì´ë¼ë„ ì§„í–‰ì„ í–ˆë‹¤ë©´ ë‹¤ì‹œ ì´ˆê¸°í™”ë¥¼ ì§„í–‰í•  ë•Œ ì—ëŸ¬ê°€ ë‚˜ëŠ” ê²ƒ
- firebase initializeAppì„ ì¤‘ë³µí•´ì„œ ì‹¤í–‰í•´ì„œ ë°œìƒë˜ëŠ” ì´ìŠˆ

### í•´ê²°

- ì´ë¯¸ init ë˜ì—ˆì„ ê²½ìš° ê¸°ì¡´ appì„ í™œìš©í•˜ë„ë¡ í•˜ë©´ ëœë‹¤.

```jsx
if (!firebase.apps.length) {
   firebase.initializeApp({});
} else {
   firebase.app(); // if already initialized, use that one
}
```

- ë¡œê·¸ì¸ì„ í•˜ê³  ì„œë²„ì—ì„œ í† í°ì„ ê°€ì§€ê³  ì˜¤ê³  firebaseì´ˆê¸°í™”ì‹œ ë¶„ê¸°ì²˜ë¦¬í•˜ë„ë¡ í•˜ì˜€ë‹¤.

# NodeBird

app.js

í”„ë¡ íŠ¸ì—ì„œ ë°›ì€ ë°ì´í„°ì„ req.bodyë¡œ ë°›ì„ ìˆ˜ ìˆê²Œ í•˜ëŠ” ë¯¸ë“¤ì›¨ì–´

```jsx
// í”„ë¡ íŠ¸ì—ì„œ json í˜•ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë°›ì„ ìˆ˜ ìˆê²Œ
app.use(express.json()); 
// form submitì„ í–ˆì„ ë•Œ application/x-www-form-urlencodedë°©ì‹ìœ¼ë¡œ ë°›ì„ ìˆ˜ ìˆê²Œ í•œë‹¤.
app.use(express.urlencoded({extended: true}));
```

### ê¸°ì´ˆì§€ì‹

POST ìš”ì²­ì€ HTML ì–‘ì‹ì„ í†µí•´ ì„œë²„ì— ì „ì†¡í•œë‹¤. 

Content-typeì„ ì •í•˜ì—¬ ê²°ì •í•œë‹¤.

`application/x-www-form-urlencoded`: &ìœ¼ë¡œ ë¶„ë¦¬ë˜ê³ , "=" ê¸°í˜¸ë¡œ ê°’ê³¼ í‚¤ë¥¼ ì—°ê²°í•˜ëŠ” key-value tupleë¡œ ì¸ì½”ë”©ë˜ëŠ” ê°’ì…ë‹ˆë‹¤. (name=kim&age=29)
ì˜ì–´ ì•ŒíŒŒë²³ì´ ì•„ë‹Œ ë¬¸ìë“¤ì€ percent encodedìœ¼ë¡œ ì¸ì½”ë”© ëœë‹¤.
(í˜„ì£¼ â‡’ %ED%98%84%EC%A3%BC)
ê·¸ë˜ì„œ ë°”ì´ë„ˆë¦¬ ë°ì´í„° (0 ë˜ëŠ” 1)ëŠ” `multipart/form-data`ë¥¼ ì´ìš©í•œë‹¤.

 `multipart/form-data`

 `text/plain`

`application/json` : {â€nameâ€ : â€œkimâ€}

### ë¹„ë°€ë²ˆí˜¸ ì €ì¥í•  ë•Œ

ë°”ë¡œ ì €ì¥í•˜ë©´ ì•ˆëœë‹¤ ê·¸ë˜ì„œ bcrypt ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì.

ë¹„ë°€ë²ˆí˜¸ë¥¼ í•´ì‹œí™” ì‹œì¼œì£¼ëŠ” ê²ƒ

[bcrypt](https://www.npmjs.com/package/bcrypt)

### ì¤‘ë³µì°¾ê¸°

sequelizeì˜ APIë¥¼ ì´ìš©í•´ì„œ ì°¾ì„ ìˆ˜ ìˆë‹¤.

[Sequelize](https://sequelize.org/v7/manual/model-querying-finders.html)

### CORS

ë¸Œë¼ìš°ì €ì—ì„œ ë‹¤ë¥¸ ë„ë©”ì¸ìœ¼ë¡œ ë³´ë‚¼ ë•Œ ë¸Œë¼ìš°ì ¸ê°€ ë§‰ëŠ”ë‹¤

ì„œë²„ì—ì„œ ì„œë²„ë¡œ ë³´ë‚¼ë•ŒëŠ” ì—†ë‹¤.

í”„ë¡ì‹œ ë°©ì‹ì„ ì‚¬ìš©í•´ë„ ëœë‹¤.

ë¸Œë¼ìš°ì €(3060) â‡’ í”„ë¡ íŠ¸ì„œë²„(3060) â‡’ ë°±ì—”ë“œì„œë²„(3065)

cors ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì´ìš©í•´ë„ ëœë‹¤.

```jsx
const cors = require('cors');

app.use(cors({
	origin: í—ˆìš©í•  URL or true // * ëŒ€ì‹  ë³´ë‚¸ ê³³ì˜ ì£¼ì†Œê°€ ìë™ìœ¼ë¡œ ë“¤ì–´ê°„ë‹¤
}));
```

### ë‚˜ì˜ ì—ëŸ¬

1. WHERE parameter "email" has invalid "undefined" value
    - req.bodyê°€ {}ë¡œ ë‚´ë ¤ì˜¤ëŠ” ê²ƒì„ í™•ì¸
    - sagas/userì—ì„œ axiosë¡œ POST í•  ë•Œ dataë¥¼ ì•ˆë³´ë‚´ì¤¬ìŒ
    - data ë³´ë‚´ë‹ˆê¹Œ í•´ê²°
2. notNull Violation: User.nickname cannot be null
    - í”„ë¡ íŠ¸ì—ì„œëŠ” req.body.nick ìœ¼ë¡œ ë³´ëƒˆê³  ì‹œí€„ë¼ì´ì ¸ì—ì„œëŠ” nicknameì„ ë°”ë¼ë´„
    - í”„ë¡ íŠ¸ì—ì„œ ë³€ìˆ˜ëª…ì„ nickì—ì„œ nicknameìœ¼ë¡œ ë³€ê²½í•´ì„œ í•´ê²°
